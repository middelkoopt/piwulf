{{- nobackup }}
{{- range $node := .AllNodes }}
{{- $cmdline := print "cmdline-" .Tags.Serial ".txt" }}
{{- $netdev := .NetDevs.default }}
{{- $baseuri := print "http://" $.Ipaddr ":" $.Warewulf.Port "/provision/" .NetDevs.default.Hwaddr }}
{{- file $cmdline }}
rd.neednet=1 rd.shell ip=dhcp root=wwinit:{{default "tmpfs" .Root}} wwinit.uri={{ $baseuri }} init=/warewulf/run-init wwid={{$netdev.Hwaddr}} {{ .Kernel.Args | join " " }}
{{ end -}}
